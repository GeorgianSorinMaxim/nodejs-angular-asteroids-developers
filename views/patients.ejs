<!doctype html>
<html ng-app="myApp">
<head>
    <title>Patients</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <!-- okeyNav -->
    <link rel="stylesheet" href="./css/okayNav.min.css" media="screen">
    <script src="./js/jquery.okayNav.js"></script>

    <link rel="stylesheet" href="../../css/style.css">

    <script>
    var myApp = angular.module("myApp", []);

    myApp.controller("resultsController", function($scope, $http) {

        $scope.patients = <%- JSON.stringify(patients) %>;
        console.log($scope.patients);

        $scope.triageOptions = [
            { name: 'Blue', value: '0' },
            { name: 'Red', value: '1' },
            { name: 'Green', value: '2' },
            { name: 'Orange', value: '3' },
            { name: 'Yellow', value: '4' }
        ];

        $scope.triage = $scope.triageOptions[0].value;

    });
    </script>
</head>
<body ng-controller="resultsController">
    <header id="header">
        <nav role="navigation" id="nav-main" class="okayNav">
            <ul>
                <li><a href="/news">NEWS</a></li>
                <li><a href="/newsList">NEWS List</a></li>
                <li><a href="/patients">Patients List</a></li>
                <li><a href="/send">Send Message</a></li>
            </ul>
        </nav>
    </header>

    </br>

    <main>
      <h1>Patient List</h1>
      <div ng-repeat="patient in patients"/>
          <form class="patient" action="/updatePatient" method="POST">
              <input type="text" name="cprp" ng-model="patient.cpr" readonly class="disabled"/> 
              <input type="text" name="firstn" ng-model="patient.firstname" /> 
              <input type="text" name="lastn" ng-model="patient.lastname" /> 
              <input type="text" name="diagn" ng-model="patient.diagnosis" /> 
              <select name="triageD" ng-model="patient.triage" ng-options="option.value as option.name for option in triageOptions"></select>
              <button type="submit" class="button"/>Update Patient</button> 
          </form>
      </div>

      <h1>Add New Patient</h1>
      <form class="patient" action="/patients" method="POST">
              <div class="add">
                  <input type="hidden" name="_method" value="put">
                  <input type="text" id="cpr" name="cpr" ng-model="cpr" placeholder="CPR" required />
                  <input type="text" id="firstname" name="firstname" ng-model="firstname" placeholder="First Name" required/>
                  <input type="text" id="lastname" name="lastname" ng-model="lastname" placeholder="Last Name" required/>

                  <input type="text" id="address" name="address" ng-model="address" placeholder="Address"/>
                  <input type="text" id="city" name="city" ng-model="city" placeholder="City"/>
                  <input type="text" id="zip" name="zip" ng-model="zip" placeholder="ZIP"/>
                  <input type="text" id="doctor" name="doctor" ng-model="doctor" placeholder="Doctor"/>

                  <input type="text" id="diagnosis" name="diagnosis" ng-model="diagnosis" placeholder="Diagnosis" required/>
                  <!-- <input type="text" id="triage" name="triage" ng-model="triage2" placeholder="Triage" required/> -->
                  <select id="triage" name="triage" ng-model="triage2" ng-options="option.value as option.name for option in triageOptions" placeholder="Last Name"required></select>

                  <button type="submit" class="button"/>Create Patient</button> </br>
              </div>
      </form>
      <br>

  </main>
<script>
  var navigation = $('#nav-main').okayNav();
</script>
</body>
</html>
